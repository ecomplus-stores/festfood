(window.webpackJsonp=window.webpackJsonp||[]).push([[11,12],{185:function(t,e,i){"use strict";var s=i(39),a=i(52),o=i(30),n=i(53),c=i(107),r=i(194);const l=(t,e)=>{const{type:i,value:s}=e;let a;if(s)return a="percentage"===i?t*(100-s)/100:t-s,a>0?a:0};var d={name:"APrices",props:{product:{type:Object,required:!0},isLiteral:Boolean,isBig:Boolean,isAmountTotal:Boolean,installmentsOption:Object,discountOption:Object,discountText:{type:[String,Boolean],default:""},canShowPriceOptions:{type:Boolean,default:!0}},data(){return{installmentsNumber:0,monthlyInterest:0,discount:{type:null,value:0},extraDiscount:{type:null,value:0,min_amount:0},discountLabel:this.discountText,pointsProgramName:null,pointsMinPrice:0,earnPointsFactor:0}},computed:{i19asOf:()=>Object(a.a)(s.r),i19from:()=>Object(a.a)(s.Gb),i19interestFree:()=>Object(a.a)(s.Ub),i19of:()=>Object(a.a)(s.Gc),i19to:()=>Object(a.a)(s.de),i19upTo:()=>Object(a.a)(s.oe),i19youEarn:()=>Object(a.a)(s.xe),price(){const t=Object(o.a)(this.product);return this.extraDiscount.value&&(!this.extraDiscount.min_amount||t>this.extraDiscount.min_amount)?l(t,this.extraDiscount):t},comparePrice(){return Object(n.a)(this.product)?this.product.base_price:this.extraDiscount.value?Object(o.a)(this.product):void 0},hasVariedPrices(){const{variations:t}=this.product;if(t){const e=Object(o.a)(this.product);for(let i=0;i<t.length;i++){if(Object(o.a)({...this.product,...t[i]})>e)return!0}}return!1},priceWithDiscount(){return this.canShowPriceOptions&&l(this.price,this.discount)},installmentValue(){if(this.canShowPriceOptions&&this.installmentsNumber>=2){if(this.monthlyInterest){const t=this.monthlyInterest/100;return this.price*t/(1-Math.pow(1+t,-this.installmentsNumber))}return this.price/this.installmentsNumber}return 0}},methods:{formatMoney:c.a,updateInstallments(t){if(t){this.monthlyInterest=t.monthly_interest;const e=t.min_installment||5,i=parseInt(this.price/e,10);this.installmentsNumber=Math.min(i,t.max_number)}},updateDiscount(t){!t||t.min_amount&&!(t.min_amount<=this.price)||this.isAmountTotal&&"total"!==t.apply_at||(this.discount=t,!this.discountText&&!1!==this.discountText&&t.label&&(this.discountLabel=`via ${t.label}`))}},watch:{price:{handler(t){this.$emit("fix-price",t)},immediate:!0}},created(){window.$setProductDomainPrice(this.product),this.canShowPriceOptions&&(this.discountOption?this.updateDiscount(this.discountOption):Object(r.a)("apply_discount").then((t=>{t.available_extra_discount&&(this.extraDiscount=t.available_extra_discount)})),this.installmentsOption?this.updateInstallments(this.installmentsOption):Object(r.a)("list_payments").then((t=>{this.updateInstallments(t.installments_option),this.updateDiscount(t.discount_option);const e=t.loyalty_points_programs;this.isLiteral&&e&&this.$nextTick((()=>{for(const t in e){const i=e[t];if(i&&i.earn_percentage>0){this.pointsMinPrice=i.min_subtotal_to_earn,this.pointsProgramName=i.name,this.earnPointsFactor=i.earn_percentage/100;break}}}))})))}};e.a=d},186:function(t,e,i){"use strict";var s=i(39),a=i(52),o=i(30),n=i(36),c=i(109),r=i(53),l=i(33),d=i(5),u=i(12),p=i(205),m=i(206),h=i(207),b=i(41),_=i(193);const f=(t,e)=>{if("object"==typeof window){t=`productCard${t}Html`;const i="function"==typeof window[t]?window[t](e):window[t];if("string"==typeof i)return i}};var y={name:"ProductCard",components:{ALink:p.a,APicture:m.a,APrices:h.a},props:{grid:{type:String,default:"col-md-4"},product:Object,productId:String,isSmall:Boolean,blockType:{type:String,default:"card"},headingTag:{type:String,default:"h3"},buyText:String,transitionClass:{type:String,default:"animated fadeIn"},canAddToCart:{type:Boolean,default:!0},ecomPassport:{type:Object,default:()=>b.default},accountUrl:{type:String,default:"/app/#/account/"},isLoaded:Boolean,installmentsOption:Object,discountOption:Object},data(){return{body:{},isLoading:!1,isWaitingBuy:!1,isHovered:!1,isFavorite:!1,error:"",localType:this.blockType,quickViewRunning:!1}},computed:{i19addToFavorites:()=>Object(a.a)(s.m),i19outOfStock:()=>Object(a.a)(s.Sc),i19unavailable:()=>Object(a.a)(s.je),i19uponRequest:()=>"Sob consulta",isWithoutPrice(){return!Object(o.a)(this.body)},ratingHtml(){return f("Rating",this.body)},buyHtml(){return f("Buy",this.body)},footerHtml(){return f("Footer",this.body)},name(){return Object(n.a)(this.body)},strBuy(){return this.buyText||"object"==typeof window&&window.productCardBuyText||Object(a.a)(s.z)},isInStock(){return Object(c.a)(this.body)},isActive(){return this.body.available&&this.body.visible&&this.isInStock},isLogged:()=>b.default.checkAuthorization(),discount(){const{body:t}=this;return Object(r.a)(t)?Math.round(100*(t.base_price-Object(o.a)(t))/t.base_price):0}},methods:{setBody(t){this.body=Object.assign({},t),delete this.body.body_html,delete this.body.body_text,delete this.body.inventory_records,delete this.body.price_change_records,this.isFavorite=Object(_.a)(this.body._id,this.ecomPassport)},fetchItem(){this.productId&&(this.isLoading=!0,Object(d.g)({url:`/products/${this.productId}.json`}).then((({data:t})=>{this.$emit("update:product",t),this.setBody(t),this.$emit("update:is-loaded",!0)})).catch((t=>{console.error(t),this.body.name&&this.body.slug&&this.body.pictures||(this.error=Object(a.a)(s.W))})).finally((()=>{this.isLoading=!1})))},async toggleFavorite(){this.isLogged&&(this.isFavorite=await Object(_.b)(this.body._id,this.ecomPassport),setTimeout((()=>{window.updateClientInfo()}),1e3))},quickView(){const t=this.body;this.quickViewRunning||(this.quickViewRunning=!0,Object(d.g)({url:`/products/${t._id}.json`}).then((({data:t})=>{const e=["variations","customizations","kit_composition"];for(let s=0;s<e.length;s++){t[e[s]];return Promise.all([i.e(0),i.e(2),i.e(1),i.e(6),i.e(7)]).then(i.bind(null,499)).then((e=>{new l.a({render:i=>i(e.default,{props:{product:t}})}).$mount(this.$refs.quickview)}))}})).catch((e=>{console.error(e),window.location=`/${t.slug}`,this.quickViewRunning=!1})).finally((()=>{this.isWaitingBuy=!1,this.quickViewRunning=!1})))},buy(){const t=this.body;this.$emit("buy",{product:t}),this.canAddToCart&&!this.isWaitingBuy&&(this.isWaitingBuy=!0,Object(d.g)({url:`/products/${t._id}.json`}).then((({data:e})=>{const s=["variations","customizations","kit_composition"];for(let t=0;t<s.length;t++){const a=e[s[t]];if(a&&a.length)return Promise.all([i.e(0),i.e(2),i.e(1),i.e(6),i.e(7)]).then(i.bind(null,499)).then((t=>{new l.a({render:i=>i(t.default,{props:{product:e}})}).$mount(this.$refs.quickview)}))}const{quantity:a,price:o}=e;console.log("buy",e),u.a.addProduct({...t,quantity:a,price:o})})).catch((e=>{console.error(e),window.location=`/${t.slug}`})).finally((()=>{this.isWaitingBuy=!1})))}},mounted(){this.$el&&this.$el.dataset&&this.$el.dataset.blockType&&(this.localType=this.$el.dataset.blockType),this.$el&&this.$el.addEventListener("mouseenter",this.refreshFavorite)},created(){this.product&&(this.setBody(this.product),void 0===this.product.available&&(this.body.available=!0),void 0===this.product.visible&&(this.body.visible=!0)),this.isLoaded||this.fetchItem()}};e.a=y},195:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return a}));var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"prices",class:{"prices--literal":t.isLiteral,"prices--big":t.isBig}},[i("strong",{staticClass:"prices__value new-price price-text fw-medium mb-0"},[t.hasVariedPrices?i("small",[t._v(" "+t._s(t.i19asOf)+" ")]):t._e(),t._v(" "+t._s(t.formatMoney(t.price))+" ")]),t.comparePrice?i("span",{staticClass:"prices__compare old-price body-md-2 text-main-2 fw-normal"},[t.isLiteral?[i("small",[t._v(" "+t._s(t.i19from)+" ")]),i("s",[t._v(t._s(t.formatMoney(t.comparePrice)))]),i("small",[t._v(" "+t._s(t.i19to)+" ")])]:i("s",[t._v(t._s(t.formatMoney(t.comparePrice)))])],2):t._e(),i("transition-group",{attrs:{"enter-active-class":"animated slideInDown"}},[t.earnPointsFactor>0&&!(t.pointsMinPrice>t.price)?i("div",{key:"points",staticClass:"prices__points"},[i("i",{staticClass:"i-check-circle"}),t._v(" "+t._s(t.i19youEarn)+" "),i("span",[t._v(" +"+t._s((t.earnPointsFactor*t.price).toFixed(1))+" ")]),i("em",[t._v(t._s(t.pointsProgramName))])]):t._e(),t.installmentsNumber>1&&t.installmentValue?i("div",{key:"installments",staticClass:"prices__installments"},[t.isLiteral?i("small",[t._v(" "+t._s(t.i19upTo)+" ")]):t._e(),i("strong",[t._v(t._s(t.installmentsNumber)+"x")]),i("small",[t._v(t._s(t.i19of))]),i("span",[t._v(" "+t._s(t.formatMoney(t.installmentValue))+" ")]),t.monthlyInterest?t._e():i("small",[t._v(" "+t._s(t.i19interestFree)+" ")])]):t._e(),"number"==typeof t.priceWithDiscount&&t.priceWithDiscount<t.price?i("div",{key:"discount",staticClass:"prices__discount mt-1"},["string"==typeof t.discountLabel&&t.discountLabel?[i("span",[t._v(" "+t._s(t.formatMoney(t.priceWithDiscount))+" ")]),i("small",{staticClass:"prices__discount-label"},[t._v(" "+t._s(t.discountLabel)+" ")])]:[i("small",[t._v(" "+t._s(t.i19asOf)+" ")]),i("span",[t._v(" "+t._s(t.formatMoney(t.priceWithDiscount))+" ")])]],2):t._e()])],1)},a=[]},196:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return a}));var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"card-product",class:{"product-card--inactive":t.body._id&&!t.isActive,"product-card--small":t.isSmall},attrs:{"data-product-id":t.body._id,"data-sku":t.body.sku,"data-block-type":"card","data-grid":t.grid},on:{mouseover:function(e){t.isHovered=!0}}},[t.isLoading?t._e():i("section",[i("div",{staticClass:"card-product-wrapper"},[i("a-link",{staticClass:"product-img",attrs:{href:"/"+t.body.slug,title:t.name}},[t.body.pictures&&t.body.pictures.length?t._l(t.body.pictures.slice(0,2),(function(e,s){return i("a-picture",{key:s,staticClass:"product-card__picture",class:{"product-card--inactive":t.body._id&&!t.isActive,"img-hover lazyload":s>1,"img-hover lazyload":1==s},attrs:{src:e,"can-calc-height":!1,"container-breakpoints":{zoom:null,big:900,normal:400}}})})):[i("img",{staticClass:"img-product lazyload",attrs:{src:"images/placeholder.jpg","data-src":"images/placeholder.jpg",alt:"image-product"}})]],2),t.isActive&&t.discount>0?i("div",{staticClass:"box-sale-wrap"},[i("p",{staticClass:"body-md-2  m-0 "},[t._v("-"+t._s(t.discount)+"%")])]):t._e(),i("ul",{staticClass:"list-product-btn"},[i("li",[i("a",{staticClass:"box-icon add-to-cart btn-icon-action hover-tooltip tooltip-left",attrs:{href:"javascript:void(0);"},on:{click:t.buy}},[i("span",{staticClass:"icon icon-cart2"}),i("span",{staticClass:"tooltip"},[t._v(t._s(t.strBuy))])])]),i("li",{staticClass:"wishlist"},[i("a",{staticClass:"box-icon btn-icon-action hover-tooltip tooltip-left",attrs:{href:t.isLogged?null:t.accountUrl},on:{click:t.toggleFavorite}},[i("span",{class:["icon","icon-heart2",t.isFavorite?"active":""]}),i("span",{staticClass:"tooltip"},[t._v(t._s(t.isFavorite?"Remover dos Favoritos":"Adicionar aos Favoritos"))])])]),i("li",[i("a",{staticClass:"box-icon quickview btn-icon-action hover-tooltip tooltip-left",on:{click:function(e){return t.quickView()}}},[i("span",{staticClass:"icon icon-view"}),i("span",{staticClass:"tooltip"},[t._v("Quick View")])])])])],1),i("div",{staticClass:"card-product-info mt-3"},[i("div",{staticClass:"box-title"},[i("div",{staticClass:"d-flex flex-column"},[t.body.categories&&t.body.categories.length?i("p",{staticClass:"caption text-main-2 font-2 m-0"},[t._v(t._s(t.body.categories[0].name))]):t._e(),i("a-link",{attrs:{href:"/"+t.body.slug,title:t.name}},[i(t.headingTag,{tag:"component",staticClass:"name-product body-md-2 m-0 fw-semibold text-secondary link"},[t._v(" "+t._s(t.name)+" ")])],1)],1),i("div",{staticClass:"price-wrap fw-medium"},[t._t("prices",(function(){return[i("a-prices",{staticClass:"d-flex align-items-center",attrs:{product:t.body,"installments-option":t.installmentsOption,"discount-option":t.discountOption}})]}))],2)]),t._t("rating",(function(){return[t._m(0)]})),t.body.available&&t.body.visible?t.isInStock?t.isWithoutPrice?t._t("without-price",(function(){return[i("p",{staticClass:"badge badge-info mt-auto"},[t._v(t._s(t.i19uponRequest))])]})):t._e():t._t("out-of-stock",(function(){return[i("p",{staticClass:"badge badge-dark mt-auto"},[t._v(t._s(t.i19outOfStock))])]})):t._t("unavailable",(function(){return[i("p",{staticClass:"badge badge-warning mt-auto"},[t._v(t._s(t.i19unavailable))])]}))],2),t._t("footer",(function(){return[t.footerHtml?i("div",{domProps:{innerHTML:t._s(t.footerHtml)}}):t._e()]}))],2),t.isLoading?[t._t("default"),t.error?i("div",{staticClass:"alert alert-warning small",attrs:{role:"alert"}},[t._v(" "+t._s(t.error)+" ")]):t._e()]:t._e(),t.discount>0?i("div",{staticClass:"box-infor-detail"},[i("div",{staticClass:"product-progress-sale"},[i("div",{staticClass:"progress-sold progress",attrs:{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100"}},[i("div",{staticClass:"progress-bar bg-primary",style:{width:t.body.quantity&&t.body.sales&&t.body.quantity+t.body.sales>0?Math.min(100,Math.max(0,t.body.sales/(t.body.quantity+t.body.sales)*100))+"%":"0%"}})]),i("div",{staticClass:"box-quantity d-flex justify-content-between"},[i("p",{staticClass:"text-avaiable caption"},[t._v(" Vendidos: "),i("span",{staticClass:"fw-bold"},[t._v(t._s(t.body.sales))])]),i("p",{staticClass:"text-avaiable caption"},[t._v(" Disponíveis: "),i("span",{staticClass:"fw-bold"},[t._v(t._s(t.body.quantity))])])])])]):t._e(),i("div",{ref:"quickview"})],2)])},a=[function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"product-card__rating",attrs:{"data-sku":t.body.sku},domProps:{innerHTML:t._s(t.ratingHtml)}})}]},275:function(t,e,i){"use strict";i(7),i(2),i(19),i(17),i(11);var s=i(39),a=i(52),o=i(107),n=i(110),c=i(5),r=i(46),l=i(12),d=(i(3),i(266)),u=i(209),p=i(193),m=i(41),h={name:"RecommendedItems",components:{ProductCard:u.a},props:{ecomPassport:{type:Object,default:()=>m.default},pageSize:{type:Number,default:99},sortOrder:{type:String,default:"sales"},listType:{type:String,default:"normal"},canLoadMore:{type:Boolean,default:!0},rowClassName:{type:String,default:"row no-gutters"},colClassName:{type:String,default:"col-6 col-md-4 col-lg-3"},productCardProps:{type:Object,default:()=>({isSmall:!0,buyText:Object(a.a)(s.i),installmentsOption:{},discountOption:{}})},ecomCart:{type:Object,default:()=>l.a},productIds:{type:Array,default:()=>[]},defaultMatchType:{type:String,default:"object"==typeof window&&window.ecomRecommendationsType||"recommended"}},data:()=>({ecomSearch:(new r.a).mergeFilter({range:{quantity:{gt:0}}}).mergeFilter({term:{available:!0}}),pageNumber:1,items:[]}),computed:{i19seeMore:()=>Object(a.a)(s.Kd),i19weRecommendToYou:()=>Object(a.a)(s.te)},methods:{async toggleFavorite(t){console.log("toggleFavorite",t),this.isFavorite=await Object(p.b)(t,this.ecomPassport),this.items=this.items.filter((e=>e._id!==t))},formatMoney:o.a,fetchItems(){delete this.ecomSearch.dsl.aggs,this.ecomSearch.setPageNumber(this.pageNumber).fetch().then((()=>{this.items=this.items.concat(this.ecomSearch.getItems()),this.totalCount=this.ecomSearch.getTotalCount(),this.totalCount&&this.$emit("recommend-items",{items:this.items,totalCount:this.totalCount})})).finally((()=>{this.$emit("fetched")}))}},created(){const t=(e=this.defaultMatchType)=>{const i=[],s=this.ecomCart.data.items.sort(((t,e)=>t.quantity>e.quantity?-1:1));for(let t=0;t<s.length&&t<=4;t++)i.push(Object(c.b)({url:`/products/${s[t].product_id}/${e}.json`}));Promise.allSettled(i).then((i=>{const s=[];i.forEach((({status:t,value:e})=>{"fulfilled"===t&&Object(n.a)(e.data).forEach((t=>{s.includes(t)||this.ecomCart.data.items.find((e=>e.product_id===t))||s.push(t)}))})),s.length?(this.ecomSearch.setProductIds(s.slice(0,24)),this.fetchItems()):"recommended"===e&&t("related")}))};this.productIds.length?(this.ecomSearch.setProductIds(this.productIds),this.totalCount=this.items.length,this.fetchItems()):Object(d.a)((()=>{t()}))},watch:{pageSize:{handler(t){this.ecomSearch.setPageSize(t)},immediate:!0},sortOrder:{handler(t){this.ecomSearch.setSortOrder(t)},immediate:!0},pageNumber(){this.fetchItems()}}};e.a=h},293:function(t,e,i){"use strict";i(122),i(2),i(17),i(11),i(236);var s=i(39),a=i(52),o=i(107),n=i(5),c=i(12),r=i(41),l=i(259);var d={name:"DiscountApplier",components:{AAlert:l.a},props:{amount:Object,couponCode:String,hasCouponInput:{type:Boolean,default:!0},isFormAlwaysVisible:Boolean,isCouponApplied:Boolean,isAttentionWanted:Boolean,canAddFreebieItems:{type:Boolean,default:!0},modulesPayload:Object,paymentGateway:Object,ecomCart:{type:Object,default:()=>c.a},customer:Object,canPassManyDiscountApps:Boolean,ecomPassport:{type:Object,default:()=>r.default}},data(){return{alertText:null,alertVariant:null,isFormVisible:this.isFormAlwaysVisible||this.couponCode,isLoading:!1,localCouponCode:this.couponCode,localAmountTotal:null,isUpdateSheduled:!1}},computed:{i19add$1ToGetDiscountMsg:()=>Object(a.a)({en_us:"Add more $1 to cart to get the discount.",pt_br:"Adicione mais $1 ao carrinho para ganhar o desconto."}),i19add:()=>Object(a.a)(s.i),i19addDiscountCoupon:()=>Object(a.a)(s.k),i19code:()=>Object(a.a)(s.R),i19couponAppliedMsg:()=>Object(a.a)(s.eb),i19discountCoupon:()=>Object(a.a)(s.jb),i19hasCouponOrVoucherQn:()=>Object(a.a)(s.Lb),i19invalidCouponMsg:()=>Object(a.a)(s.Xb),i19campaignAppliedMsg:()=>Object(a.a)(s.F),canAddCoupon(){return!this.couponCode||!this.isCouponApplied||this.couponCode!==this.localCouponCode},paymentGatewayDiscount(){if(!this.paymentGateway)return 0;const{discount:t}=this.paymentGateway;if(!t||!t.value)return 0;const e=t.apply_at||"total",i="total"===e?this.localAmountTotal:this.amount[e];if(i>0){const{type:e,value:s}=t;return"percentage"===e?i*s/100:s<=i?s:i}return 0}},methods:{fixAmount(){const t=this.amount||{subtotal:this.ecomCart.data.subtotal};this.localAmountTotal=Math.round(100*((t.subtotal||0)+(t.freight||0)-this.paymentGatewayDiscount))/100},parseDiscountOptions(t=[]){let e=0,i=!1;if(t.length){let s,a,c;t.forEach((t=>{const{validated:r,error:l,response:d}=t;if(r&&!l){const r=d.discount_rule;if(r)if(this.canPassManyDiscountApps)e?(r.extra_discount.value+=e,s=r):s={app_id:t.app_id,...r},e=r.extra_discount.value;else{const i=r.extra_discount.value;e>i||(e=i,s={app_id:t.app_id,...r})}else d.available_extra_discount&&d.available_extra_discount.min_amount&&(a=this.i19add$1ToGetDiscountMsg.replace("$1",Object(o.a)(d.available_extra_discount.min_amount-this.amount.subtotal)),c="info");if(d.invalid_coupon_message&&(a=d.invalid_coupon_message),this.canAddFreebieItems){const t=d.freebie_product_ids;Array.isArray(t)&&t.length&&(i=!0,u=this.ecomCart,p=t,Array.isArray(p)?(u.data.items.forEach((({_id:t,product_id:e,flags:i})=>{i&&i.includes("freebie")&&!p.includes(e)&&u.removeItem(t)})),p.forEach((t=>{!u.data.items.find((e=>e.product_id===t&&e.flags&&e.flags.includes("freebie")))&&Object(n.g)({url:`/products/${t}.json`}).then((({data:e})=>{!(e.quantity>0)||e.variations&&e.variations.length||u.addProduct({...e,flags:["freebie","__tmp"]},null,p.reduce(((e,i)=>i===t?e+1:e),0))})).catch(console.error)}))):u.data&&u.data.items&&u.data.items.length&&u.data.items.forEach((({_id:t,flags:e})=>{e&&e.includes("freebie")&&u.removeItem(t)})),this.localCouponCode&&this.$emit("update:coupon-code",this.localCouponCode))}}var u,p})),e?(this.localCouponCode?a?(this.alertText=a,this.alertVariant=c||"warning"):(this.$emit("update:coupon-code",this.localCouponCode),this.alertText=this.i19couponAppliedMsg,this.alertVariant="info"):(this.alertText=this.i19campaignAppliedMsg,this.alertVariant="info"),this.$emit("set-discount-rule",s)):(this.localCouponCode&&!i?(this.alertText=a||this.i19invalidCouponMsg,this.alertVariant=c||"warning"):this.alertText=null,this.$emit("set-discount-rule",{}))}},fetchDiscountOptions(t={}){this.isLoading=!0;const e=this.customer||this.ecomPassport.getCustomer();e&&(e._id||e.doc_number)&&(t.customer={},e._id&&(t.customer._id=e._id),e.display_name&&(t.customer.display_name=e.display_name),e.doc_number&&(t.customer.doc_number=e.doc_number));const i={...this.modulesPayload,amount:{subtotal:this.localAmountTotal,...this.amount,total:this.localAmountTotal,discount:this.paymentGatewayDiscount},items:this.ecomCart.data.items,...t};i.domain&&(i.domain+=".skip-open"),Object(n.c)({url:"/apply_discount.json",method:"POST",data:i}).then((({data:t})=>this.parseDiscountOptions(t.result))).catch((t=>{console.error(t),this.alertVariant="danger",this.alertText=Object(a.a)(s.wb)})).finally((()=>{this.isLoading=!1}))},submitCoupon(t){if(t||this.canAddCoupon){const{localCouponCode:t}=this,e={discount_coupon:t};this.fetchDiscountOptions(e)}},updateDiscount(t=!0){this.couponCode?!t&&this.isCouponApplied||this.submitCoupon(t):(t||!this.isUpdateSheduled&&this.amount&&this.localAmountTotal)&&this.fetchDiscountOptions()},scheduleUpdateDiscount(){this.isUpdateSheduled||(this.isUpdateSheduled=!0,this.$nextTick((()=>{setTimeout((()=>{this.updateDiscount(),this.isUpdateSheduled=!1}),600)})))}},watch:{couponCode(t){t!==this.localCouponCode&&(this.localCouponCode=t,t&&!this.isFormVisible&&(this.isFormVisible=!0))},localCouponCode(){"info"===this.alertVariant&&(this.alertText=null)},isFormAlwaysVisible(t){t&&(this.isFormVisible=!0)},isFormVisible(t){t&&this.$nextTick((()=>{this.$refs.input.focus()}))},localAmountTotal(t,e){null!==e&&Math.abs(t-e)>.02&&this.scheduleUpdateDiscount()},amount:{handler(){this.fixAmount()},deep:!0},paymentGatewayDiscount(){this.scheduleUpdateDiscount()}},mounted(){this.fixAmount(),this.updateDiscount(!1)}};e.a=d},294:function(t,e,i){"use strict";i.d(e,"a",(function(){return s})),i.d(e,"b",(function(){return a}));var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"recommended-items"},[i("transition",{attrs:{"enter-active-class":"animated fadeIn"}},["favorites"===t.listType?i("div",[0==t.items.length?i("div",{staticClass:"recommended-items__empty"},[t._t("empty",(function(){return[i("p",{staticClass:"lead"},[t._v("Opss... parece que não há itens salvos como favoritos.")])]}))],2):i("div",{},[i("div",{staticClass:"container px-0"},[i("div",{staticClass:"tf-wishlist"},[i("table",{staticClass:"tf-table-wishlist"},[i("thead",[i("tr",[i("th",{staticClass:"wishlist-item_remove"}),i("th",{staticClass:"wishlist-item_image"}),i("th",{staticClass:"wishlist-item_info"},[i("p",{staticClass:"product-title fw-semibold"},[t._v("Produto")])]),i("th",{staticClass:"wishlist-item_price"},[i("p",{staticClass:"product-title fw-semibold"},[t._v("Preço Unitário")])]),i("th",{staticClass:"wishlist-item_stock"},[i("p",{staticClass:"product-title fw-semibold"},[t._v("Em estoque?")])]),i("th",{staticClass:"wishlist-item_action"})])]),i("tbody",t._l(t.items,(function(e){return i("tr",{key:e._id,staticClass:"wishlist-item"},[i("td",{staticClass:"wishlist-item_remove"},[i("i",{staticClass:"icon-close remove link cs-pointer",on:{click:function(i){return t.toggleFavorite(e._id)}}})]),i("td",{staticClass:"wishlist-item_image",staticStyle:{background:"#fff"}},[i("a",{attrs:{href:"/"+e.slug}},[i("img",{staticClass:"lazyload",attrs:{src:e.pictures&&e.pictures[0]?e.pictures[0].normal.url:"/assets/img-placeholder.png","data-src":e.pictures&&e.pictures[0]?e.pictures[0].normal.url:"/assets/img-placeholder.png",alt:e.name}})])]),i("td",{staticClass:"wishlist-item_info"},[i("a",{staticClass:"text-line-clamp-2 body-md-2 fw-semibold text-secondary link",attrs:{href:"/"+e.slug}},[t._v(" "+t._s(e.name)+" ")])]),i("td",{staticClass:"wishlist-item_price"},[i("div",{staticClass:"price-wrap fw-medium flex-nowrap"},[e.price_effective_discount?i("span",{staticClass:"new-price price-text fw-medium mb-0"},[t._v(" "+t._s(t.formatMoney(e.price_effective_discount.value))+" ")]):t._e(),i("span",{staticClass:"price-text fw-medium mb-0",class:e.price_effective_discount?"old-price body-md-2 text-main-2 fw-normal":"new-price"},[t._v(" "+t._s(t.formatMoney(e.price))+" ")])])]),i("td",{staticClass:"wishlist-item_stock"},[i("span",{staticClass:"wishlist-stock-status",class:{"text-success":e.quantity>0,"text-danger":0===e.quantity}},[t._v(" "+t._s(e.quantity>0?"Sim":"Não")+" ")])]),i("td",{staticClass:"wishlist-item_action"},[e.quantity>0?i("button",{staticClass:"tf-btn btn-gray w-100",attrs:{href:"/"+e.slug}},[i("span",{staticClass:"text-white"},[t._v("Ver Produto")])]):i("span",{staticClass:"text-muted"},[t._v("Indisponível")])])])})),0),t.items.length?t._e():i("tfoot",{},[i("tr",[i("td",{staticClass:"text-center",attrs:{colspan:"6"}},[t._v(" "+t._s(t.i19noFavorites)+" ")])])])])])])])]):i("div",[t.items.length?i("div",[t.productIds.length?t._e():i("div",{staticClass:"recommended-items__title"},[t._t("title",(function(){return[i("p",{staticClass:"lead"},[t._v(" "+t._s(t.i19weRecommendToYou)+" ")])]}))],2),i("div",{class:t.rowClassName},t._l(t.items,(function(e){return i("div",{key:e._id,class:t.colClassName},[t._t("item",(function(){return[i("product-card",t._b({attrs:{product:e,"is-loaded":!0}},"product-card",t.productCardProps,!1))]}),null,{item:e})],2)})),0),t.canLoadMore?i("div",{staticClass:"recommended-items__load-more"},[t.totalCount>=t.pageSize*(t.pageNumber+1)?i("button",{staticClass:"btn btn-sm btn-outline-secondary",on:{click:function(e){t.pageNumber++}}},[i("i",{staticClass:"i-plus mr-1"}),t._v(" "+t._s(t.i19seeMore)+" ")]):t._e()]):t._e()]):t._e()])])],1)},a=[]}}]);